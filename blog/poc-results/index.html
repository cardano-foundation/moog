<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Antithesis Proof-of-Concept Results | Moog</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://cardano-foundation.github.io/moog/img/anti-cli-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://cardano-foundation.github.io/moog/img/anti-cli-social-card.jpg"><meta data-rh="true" property="og:url" content="https://cardano-foundation.github.io/moog/blog/poc-results"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Antithesis Proof-of-Concept Results | Moog"><meta data-rh="true" name="description" content="Since the start of our project, Cardano Foundation and Antithesis have been busy working on a Proof-of-Concept aimed at evaluating Antithesis&#x27;s capability to enhance Cardano&#x27;s testing infrastructure. The results have been promising, with the platform successfully identifying both previously known and new unknown bugs in the cardano-node."><meta data-rh="true" property="og:description" content="Since the start of our project, Cardano Foundation and Antithesis have been busy working on a Proof-of-Concept aimed at evaluating Antithesis&#x27;s capability to enhance Cardano&#x27;s testing infrastructure. The results have been promising, with the platform successfully identifying both previously known and new unknown bugs in the cardano-node."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2025-05-01T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/abailly"><meta data-rh="true" property="article:tag" content="Infrastructure"><link data-rh="true" rel="icon" href="/moog/img/cardano-ada-logo.svg"><link data-rh="true" rel="canonical" href="https://cardano-foundation.github.io/moog/blog/poc-results"><link data-rh="true" rel="alternate" href="https://cardano-foundation.github.io/moog/blog/poc-results" hreflang="en"><link data-rh="true" rel="alternate" href="https://cardano-foundation.github.io/moog/blog/poc-results" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://cardano-foundation.github.io/moog/blog/poc-results","mainEntityOfPage":"https://cardano-foundation.github.io/moog/blog/poc-results","url":"https://cardano-foundation.github.io/moog/blog/poc-results","headline":"Antithesis Proof-of-Concept Results","name":"Antithesis Proof-of-Concept Results","description":"Since the start of our project, Cardano Foundation and Antithesis have been busy working on a Proof-of-Concept aimed at evaluating Antithesis's capability to enhance Cardano's testing infrastructure. The results have been promising, with the platform successfully identifying both previously known and new unknown bugs in the cardano-node.","datePublished":"2025-05-01T00:00:00.000Z","author":{"@type":"Person","name":"Arnaud Bailly","description":"Project Lead","url":"https://github.com/abailly","image":"img/abailly-avatar.jpeg"},"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://cardano-foundation.github.io/moog/blog","name":"Blog"}}</script><link rel="alternate" type="application/rss+xml" href="/moog/blog/rss.xml" title="Moog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/moog/blog/atom.xml" title="Moog Atom Feed">





<link rel="stylesheet" href="https://unpkg.com/asciinema-player@3.0.0/dist/bundle/asciinema-player.min.css"><link rel="stylesheet" href="/moog/assets/css/styles.fef8902e.css">
<script src="/moog/assets/js/runtime~main.a8b8e982.js" defer="defer"></script>
<script src="/moog/assets/js/main.d5deda83.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><link rel="preload" as="image" href="/moog/img/cardano-ada-logo.svg"><link rel="preload" as="image" href="img/abailly-avatar.jpeg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#ff9999;color:#091E42" role="banner"><div class="content_knG7 announcementBarContent_xLdY"><strong>Moog is still at an early stage and experimental. Contributions and ideas are <a target="_blank" rel="noopener noreferrer" href="https://github.com/cardano-foundation/moog/">most welcome</a></strong></div></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/moog/"><div class="navbar__logo"><img src="/moog/img/cardano-ada-logo.svg" alt="Cardano Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/moog/img/cardano-ada-logo.svg" alt="Cardano Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Moog</b></a><a class="navbar__item navbar__link" href="/moog/docs/overview">Documentation</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/moog/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/cardano-foundation/moog" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2025</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/moog/blog/anti-cli-news">Antithesis tools for Cardano Community</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/moog/blog/poc-results">Antithesis Proof-of-Concept Results</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/moog/blog/kick-off-antithesis">Cardano / Antithesis Project Kick-off</a></li></ul></div></nav></aside><main class="col col--7"><article class=""><header><h1 class="title_f1Hy">Antithesis Proof-of-Concept Results</h1><div class="container_mt6G margin-vert--md"><time datetime="2025-05-01T00:00:00.000Z">May 1, 2025</time> · <!-- -->9 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/abailly" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="img/abailly-avatar.jpeg" alt="Arnaud Bailly"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://github.com/abailly" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">Arnaud Bailly</span></a></div><small class="authorTitle_nd0D" title="Project Lead">Project Lead</small><div class="authorSocials_rSDt"><a href="https://github.com/abailly" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 256 250" preserveAspectRatio="xMidYMid" style="--dark:#000;--light:#fff" class="authorSocialLink_owbf githubSvg_Uu4N"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div id="__blog-post-container" class="markdown"><p>Since the <a href="/moog/blog/kick-off-antithesis">start</a> of our project, Cardano Foundation and Antithesis have been busy working on a Proof-of-Concept aimed at evaluating Antithesis&#x27;s capability to enhance Cardano&#x27;s testing infrastructure. The results have been promising, with the platform successfully identifying both previously known and new unknown bugs in the cardano-node.</p>
<p>This blog post outlines our journey and findings so far, and sketches out plans for the short and medium term in order to ensure this project delivers the most value for the Cardano community.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2>
<p>Our exploration with Antithesis began in January 2025, when we first made contact with their team. Quite excited with the prospect this tool offered for testing existing and feature core components of the Cardano network, a small team was assembled within the Cardano Foundation to work on a Proof-of-Concept with Antithesis team. This project was kicked-off on April 2nd at which point both teams started to collaborate actively to understand how to best use the platform to test cardano-node.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="goals-and-objectives">Goals and Objectives<a href="#goals-and-objectives" class="hash-link" aria-label="Direct link to Goals and Objectives" title="Direct link to Goals and Objectives">​</a></h3>
<p>The PoC was undertaken with the main goal of determining if Antithesis could significantly improve our ability to test the Cardano network and its components. As a stretch goal, we also wanted to gauge interest from the broader Cardano community in using such a tool.</p>
<p>To achieve these goals, we established several concrete objectives:</p>
<ul>
<li>Learn how to run Antithesis (AT) on a cluster of <a href="https://github.com/IntersectMBO/cardano-node" target="_blank" rel="noopener noreferrer">cardano-node</a></li>
<li>Reproduce already known bugs, aka. <a href="https://www.smithsonianmag.com/arts-culture/why-did-van-halen-demand-concert-venues-remove-brown-mms-from-the-menu-180982570/" target="_blank" rel="noopener noreferrer">Brown M&amp;Ms</a></li>
<li>Discover new, unknown bugs</li>
<li>Engage with the Core team to gather early feedback and build Cardano specific test environment (properties, <a href="https://antithesis.com/docs/test_templates/" target="_blank" rel="noopener noreferrer">test composer</a>...)</li>
<li>Outline how Antithesis can benefit the community in the future</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-teams">The Teams<a href="#the-teams" class="hash-link" aria-label="Direct link to The Teams" title="Direct link to The Teams">​</a></h3>
<p>This initiative brought together expertise from both organizations:</p>
<ul>
<li>On the Cardano side, people from the HAL, Network and Infrastructure team at the Cardano Foundation, as well as involvement of engineers from IOE&#x27;s Consensus team</li>
<li>On the Antithesis side, solution engineers to support the team.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="results-and-achievements">Results and Achievements<a href="#results-and-achievements" class="hash-link" aria-label="Direct link to Results and Achievements" title="Direct link to Results and Achievements">​</a></h3>
<p>When measured against our initial objectives, the PoC delivered significantly positive results. Some objectives were not fully completed but they mostly relate to our stated stretch goal. Most importantly, the main goal of this Proof-of-Concept period, namely to demonstrate Antithesis&#x27; capabilities to find issues in Cardano network was achieved.</p>
<ul>
<li>✅ <strong>Learn how to run tests with Haskell node</strong>: Successfully achieved</li>
<li>✅ <strong>Reproduce already known bugs</strong>: Successfully achieved</li>
<li>✅ <strong>Find new and unknown bugs</strong>: Successfully achieved</li>
<li>🟠 <strong>Engage with other teams to gather early feedback</strong>: Partially achieved</li>
<li>🟠 <strong>Learn how to best use AT platform for Cardano</strong>: Partially achieved</li>
<li>🔴 <strong>Engage with community to ensure interest and funding</strong>: Not achieved</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="more-details-about-our-findings">More details about our findings<a href="#more-details-about-our-findings" class="hash-link" aria-label="Direct link to More details about our findings" title="Direct link to More details about our findings">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="infrastructure">Infrastructure<a href="#infrastructure" class="hash-link" aria-label="Direct link to Infrastructure" title="Direct link to Infrastructure">​</a></h3>
<p>Using Antithesis to test cardano-node required some initial effort to create the necessary basic infrastructure of Docker images and compose descriptors. As our first objective was to be able to reproduce some peer-to-peer network related bugs, we leveraged and open-sourced our in-house tool for <a href="https://github.com/cardano-foundation/testnet-generation-tool" target="_blank" rel="noopener noreferrer">generating testnets</a> configuration.</p>
<p>This enabled us to test relatively large clusters of up to 12 nodes while simulating extended time periods of several hours, enough to trigger various changes in the P2P controller. Throughout this process, we had to overcome various minor challenges integrating cardano-node in Antithesis, and it took us a couple of weeks to be able to run a meaningful test to completion.</p>
<p>As examplified by the <a href="https://github.com/cardano-foundation/moog/blob/07474674fc8a8bfbb8a56316939c5eee3e594a6e/compose/testnets/example_10.2.1/README.md#L1" target="_blank" rel="noopener noreferrer">example_10.2.1</a> directory, the configuration needed to run a cluster of Cardano nodes in AT will be defined as a <a href="https://docs.docker.com/compose/" target="_blank" rel="noopener noreferrer">docker compose</a> file containing:</p>
<ul>
<li>A set of <em>n</em> networked nodes pulled either from a public or dedicated repository. Each of those containers is typically built from either pre-built cardano-node binaries or a specific source tree, and runs a node along with a process that injects transaction at a regular interval,</li>
<li>A <em>sidecar</em> container whose purpose is to monitor the rest of the cluster and notify the AT runner of the main events of interest, most importantly when the cluster is ready to be tested.</li>
</ul>
<p>An AT run then &quot;simply&quot; consists in feeding the <code>docker-compose.yaml</code> file to the API and waiting for the result to be notified.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-discovery">Bug Discovery<a href="#bug-discovery" class="hash-link" aria-label="Direct link to Bug Discovery" title="Direct link to Bug Discovery">​</a></h3>
<p>Obviously, the purpose of AT is to find bugs and this was our main objective of the proof-of-concept project. Our experiments with AT were able to:</p>
<ul>
<li>Find three known bugs we reintroduced or left in the nodes voluntarily,</li>
<li>Find three unknown bugs, which is the most interesting outcome we could have expected.</li>
</ul>
<p>The three known bugs were:</p>
<ul>
<li>Race in the Inbound governor startup logic, an <a href="https://github.com/IntersectMBO/ouroboros-network/pull/5017/commits/f11758176591c9868beb06a42e7f22c9ac36d9b0" target="_blank" rel="noopener noreferrer">old bug</a> that was discovered with <a href="https://github.com/input-output-hk/io-sim/blob/main/io-sim/how-to-use-IOSimPOR.md" target="_blank" rel="noopener noreferrer">IOSimPOR</a> and fixed in later versions of cardano-node,</li>
<li>Peer-sharing <a href="https://github.com/IntersectMBO/ouroboros-network/issues/5058" target="_blank" rel="noopener noreferrer">known bug</a> which is trivial to trigger,</li>
<li>Blockfetch protocol bug which was reinserted during work on new features.</li>
</ul>
<p>Of the three previously unknown bugs, two are related to networking and one to consensus. The latter was notified to the consensus core team which quickly confirmed the issue and was able to reproduce it locally, leading to patch included in the 10.4.1 version of the node.</p>
<p>Some assumptions made by AT can lead it to report bugs which aren&#x27;t ones, like the fact the cardano-node outputs some metrics at a severity level classified as <code>Critical</code> which AT wrongly interprets as bugs.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting-bug-findings">Troubleshooting bug findings<a href="#troubleshooting-bug-findings" class="hash-link" aria-label="Direct link to Troubleshooting bug findings" title="Direct link to Troubleshooting bug findings">​</a></h3>
<p>It&#x27;s great to find bugs but once one is found, it&#x27;s even better to be able to investigate promptly its origin. AT provides a few tools to do so, but we haven&#x27;t had the time yet to leverage those to their fullest extant.</p>
<p>Being a deterministic simulation testing platform, AT can explore various &quot;multiverses&quot;, travelling to the past and trying different configurations and fault injections, to better understand how easily a bug is triggered and what kind of circumstances lead to it. The following picture is an example <em>Bug likelihood graph</em> that is generated from the history of executions</p>
<p><img decoding="async" loading="lazy" alt="Bug likelihood graph" src="/moog/assets/images/bug-likelihood-graph-ef5da0b8c0b0a91ff8ebc06b386cc16f.png" width="2796" height="800" class="img_ev3q"></p>
<p>But the most powerful tool at our disposal is the so-called <a href="https://antithesis.com/docs/multiverse_debugging/overview/" target="_blank" rel="noopener noreferrer"><em>Multiverse Debugger</em></a> which provides an environment, similar to Notebook, where one can interact with the System-Under-Test using any tool available in the Docker images and more importantly where it&#x27;s possible to travel back in time and <em>branch</em> execution of the SUT in order to investigate various hypothesis on the origin of a bug.</p>
<p>We tried to investigate one bug through the Multiverse Debugger by using <a href="https://www.tcpdump.org/" target="_blank" rel="noopener noreferrer">tcpdump</a> to generate pcap files and troubleshoot networking issues, but we were not able to reproduce the bug once observed with tcpdump. However, having the containers fully under our control allowed us to be able to download the node&#x27;s database which was quite helpful to reproduce issues locally.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="community-engagement">Community Engagement<a href="#community-engagement" class="hash-link" aria-label="Direct link to Community Engagement" title="Direct link to Community Engagement">​</a></h3>
<p>Community outreach during the PoC period remained an area with significant room for development. We introduced and discussed the platform at the Node Diversity workshop, which sparked some interest among attendees, but as we hadn&#x27;t had concrete results at the time, this interest did not lead to concrete collaboration.
However, the fact we were able to find a genuinely new bug, and the collaboration this lead to with the consensus team, are significantly positive signals that Antithesis can become a valuable asset in the development process of both existing and future &quot;nodes&quot;.</p>
<p>We haven&#x27;t yet had the opportunity to test Amaru on the Antithesis platform due to lack of time and Amaru state of development which, so far, would not make it possible to run meaningful end-to-end tests in a cluster.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2>
<p>This proof-of-concept project achieved its goals in demonstrating the ability of Antithesis to find interesting bugs, supplementing the existing extensive testing infrastructure the cardano-node possesses. There&#x27;s still a lot of work lying ahead of us and the Cardano Foundation is committed to keep working with Antithesis to reach that ambitious goal, namely open access to these sophisticated testing capabilities for other node implementations, and more generally the whole Cardano community.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="next-steps">Next steps<a href="#next-steps" class="hash-link" aria-label="Direct link to Next steps" title="Direct link to Next steps">​</a></h3>
<p>To this end, we plan to work along the following axes:</p>
<ol>
<li>Make it easier for node implementors to use Antithesis for testing,</li>
<li>Provide generic properties that can easily be integrated in test composer <em>sidecar</em> that any validator node should respect, such as the one outlined on the <a href="https://ouroboros-consensus.cardano.intersectmbo.org/docs/for-developers/CardanoPraosBasics" target="_blank" rel="noopener noreferrer">Ouroboros Consensus page</a> and drawn from the research papers.</li>
</ol>
<p>More concretely, in the short term we&#x27;ll be focusing on:</p>
<ol>
<li>Better documentation on how to run new tests on the platform,</li>
<li>Automating test executions and report sharing through GitHub actions,</li>
<li>Enable logs based SDK using <a href="https://github.com/cardano-foundation/moog/pull/5" target="_blank" rel="noopener noreferrer">cardano-tracer</a> to aggregate cardano-node logs,</li>
<li>Express more interesting properties (Chain prefix, chain density, chain growth...) as composable scripts or executables to be included in test composer images,</li>
<li>Collaborate with cardano-node, Amaru, and other node implementor teams interested in leveraging Antithesis.</li>
</ol>
<p>We also want to contribute useful tools and techniques, that can be used both within and without the Antithesis platform, as has been discussed in the <a href="https://forum.cardano.org/t/node-diversity-workshop-april-2025/145248/1" target="_blank" rel="noopener noreferrer">Node Diversity Workshop</a> that took place in Paris a month ago:</p>
<ol>
<li>Generalise the <em>block tree</em> generators and other testing tools already existing in ouroboros-consensus to make them usable with arbitrary node implementations,</li>
<li>Implement an <em>adversarial node</em> that would actively try to thwart honest nodes.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="call-to-action">Call To Action<a href="#call-to-action" class="hash-link" aria-label="Direct link to Call To Action" title="Direct link to Call To Action">​</a></h3>
<p>Because we believe the safety and security of the network is the responsibility of the whole community, this project is meant to be as open as possible and we actively seek and encourage contributions which could take a wide variety of forms:</p>
<ul>
<li>Improve infrastructure code (eg. docker images, containers, compose files) we use to run tests,</li>
<li>Better document this infrastructure and how to run those tests,</li>
<li>Define <a href="https://antithesis.com/docs/test_templates/" target="_blank" rel="noopener noreferrer">tests</a> that explore &quot;interesting&quot; scenarios,</li>
<li>...</li>
</ul></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a title="Setting up infrastructure for Antithesis run" class="tag_zVej tagRegular_sFm0" href="/moog/blog/tags/infra">Infrastructure</a></li></ul></div></div><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><a href="https://github.com/cardano-foundation/moog/tree/main/docs/blog/2025-05-01-poc-results.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/moog/blog/anti-cli-news"><div class="pagination-nav__sublabel">Newer post</div><div class="pagination-nav__label">Antithesis tools for Cardano Community</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/moog/blog/kick-off-antithesis"><div class="pagination-nav__sublabel">Older post</div><div class="pagination-nav__label">Cardano / Antithesis Project Kick-off</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a><ul><li><a href="#goals-and-objectives" class="table-of-contents__link toc-highlight">Goals and Objectives</a></li><li><a href="#the-teams" class="table-of-contents__link toc-highlight">The Teams</a></li><li><a href="#results-and-achievements" class="table-of-contents__link toc-highlight">Results and Achievements</a></li></ul></li><li><a href="#more-details-about-our-findings" class="table-of-contents__link toc-highlight">More details about our findings</a><ul><li><a href="#infrastructure" class="table-of-contents__link toc-highlight">Infrastructure</a></li><li><a href="#bug-discovery" class="table-of-contents__link toc-highlight">Bug Discovery</a></li><li><a href="#troubleshooting-bug-findings" class="table-of-contents__link toc-highlight">Troubleshooting bug findings</a></li><li><a href="#community-engagement" class="table-of-contents__link toc-highlight">Community Engagement</a></li></ul></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a><ul><li><a href="#next-steps" class="table-of-contents__link toc-highlight">Next steps</a></li><li><a href="#call-to-action" class="table-of-contents__link toc-highlight">Call To Action</a></li></ul></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/moog/docs/overview">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/quVqGUrW" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/moog/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/cardano-foundation/moog" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Cardano Foundation, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>